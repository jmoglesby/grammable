<div class="col-10 offset-1 col-sm-8 offset-sm-2">
  <% @grams.each do |gram| %>
    <div class="gram">
      <div class="handle"><%= gram.user.email %></div>
      <% if gram.picture.url.present? %>
        <%= image_tag gram.picture.url, class: 'img-fluid' %>
      <% end %>
      <p><%= gram.message %></p>

      <div class="gram-actions float-right">
        <% if current_user && current_user == gram.user %>
          <%= link_to 'Edit', edit_gram_path(gram) %>
          <%= link_to 'Delete', gram_path(gram), method: :delete, data: { confirm: 'Are you sure?' } %>
        <% end %>
      </div>

      <br class="clear-fix"/>

      <div class="comments">
        <h3>Comments</h3>

        <% gram.comments.each do |comment| %>
          <div class="comment">
            <span class="comment-handle">
              <%= comment.user.email %>
            </span>
            <%= comment.message %>
          </div>
        <% end %>

        <h5 class="mt-2">Add a comment</h5>
        <%= simple_form_for Comment.new, url: gram_comments_path(gram) do |f| %>
          <%= f.input :message %>
          <%= f.submit 'Add Comment', class: 'btn my-btn w-100' %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
